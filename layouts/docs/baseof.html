{{/*

  A copy of the baseof.html partial in Docsy, modified
	to remove the right-hand column from the layout.

*/}}

{{/* Generate a static file versions.json that can be used to populate the version picker */}}
{{ if .IsHome }}
  {{- /* Load all changelog subpages, sorted by release date */ -}}
  {{ $changelog := site.GetPage "changelog" }}
  {{ $pages := $changelog.RegularPages.ByDate.Reverse }}

  {{- /* Collect proper versions and build metadata dicts */ -}}
  {{ $versions := slice }}
  {{ range $pages }}
    {{ if findRE `^v[0-9]+\.[0-9]+$` .Params.linkTitle }}
      {{ $versions = $versions | append (dict "name" .Params.linkTitle "date" .Params.date ) }}
    {{ end }}
  {{ end }}

  {{- /* Generate the JSON */ -}}
  {{ $json := jsonify $versions }}
  {{ $noop := (resources.FromString "/versions.json" $json).Permalink }}
{{ end }}

<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage"
    {{- with .Site.Language.LanguageDirection }} dir="{{ . }}" {{- end -}}
    {{ with .Site.Language.Lang }} lang="{{ . }}" {{- end }} {{/**/ -}}
    class="no-js">
  <head>
    {{ partial "head.html" . }}
    {{ if .Page.Store.Get "hasMath" }}
      <link href="{{ relURL "css/katex.min.css" }}" rel="preload" as="style">
      <link href="{{ relURL "css/katex.min.css" }}" rel="stylesheet">
    {{ end }}
  </head>
  <body class="td-{{ .Kind }}{{ with .Page.Params.body_class }} {{ . }}{{ end }}">
    <header>
      {{ partial "navbar.html" . }}
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            {{ partial "sidebar.html" . }}
          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            {{ partial "version-banner.html" . }}
            {{ if not (.Param "ui.breadcrumb_disable") -}}
              {{ partial "breadcrumb.html" . -}}
            {{ end -}}
            {{ block "main" . }}{{ end }}
          </main>
        </div>
      </div>
      {{ partial "footer.html" . }}
    </div>
    {{ partial "scripts.html" . }}
  </body>
</html>
